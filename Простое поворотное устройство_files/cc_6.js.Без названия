(function(){var n="0.2.1",e,t="undefined",a=25,r=parseInt(1e3/a),i=e,o={"function":!0,object:!0},s={DEBUG_MODE:!1,counterID:"6",instanceID:"externalConf###Instanceid"},u=function(n){return typeof n!==t},c="HISTATS_CANVAS_DEBUG_ON";s.DEBUG_MODE=u(window[c])&&1==window[c];var l=function(){return s.instanceID},f="_HistatsCounterGraphics_",d,v=function(){return f+s.counterID},g=function(n){return!("string"!=typeof n||""==n)},h=function(){try{s.DEBUG_MODE&&u(console)&&console.log.apply(this,arguments)}catch(n){}},p=function(t,a){var o=t||{};try{var c=function(n){var e="autostart";return"undefined"!=typeof n[e]&&n[e]===!0},l={ANIMATION_RUNNING_STATUS:!0,ANIMATION_STARTED:!1,AUTOSTART:c(o),_STOPPED:!1,INSTANCE_ID:"-"+parseInt(1e4*Math.random())},f=function(){return l.INSTANCE_ID},g=100,p=1,b=function(){return a.document},m=function(n){return u(n)&&!!b().getElementById(n)},A=function(n){i=a.setTimeout(n,r)},w=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.msRequestAnimationFrame||a.oRequestAnimationFrame||A,T=a["Date"]||{},S=function(n,e){for(var t in n)e.hasOwnProperty(t)&&(e[t]=n[t])};o.getInstanceID=f;var x=v();o.IS_HISTATS_CANVAS=!0,o.globalObjectName=x,o.$window=a;var y=function(n){return m(n)?b().getElementById(n):e},B={w:0,h:0,yBase:0,xBase:0,hasShadow:!1,hasLabel:!1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:1,doMouseOverOut:1},C={msLastFrameDrawn:0,msPerFrame:r,frameCounter:0,isInAnimationTransition:!1,animation_duration_inFrames:20,waitframesBetweenTwoAnimations:80,framesBetweenTwoAnimations:100,currentLoopFrame:0,autoTriggerTextChange_onFrame:e,customization:{}},I={domCanvasObject:null,canvas2dContext:null,canvasProperties:B},O=function(){var n={},t=n.hasOwnProperty,a=0,r=0,i={blockMessages:!1,recordMessages:!1,messageLog:[],printMessages:!1,messagePassedCount:0,subscribersCount:0,topicsCount:0,_topics:n},o=function(e){return t.call(n,e)},s=function(e){return i.printMessages&&console.log(f(),"addTopic",e),r++,i.topicsCount++,r>50&&h(f(),"Lot of topics registered!",e),n[e]=[]},u=function(e){return n[e]},c=function(e,t,r){i.printMessages&&console.log(f(),"subscribe",e,t,r),i.recordMessages&&i.messageLog.push(["subscribe",e,t,r]),r=r||g,o(e)||s(e);var c=u(e).push({callback:t,priority:t})-1;return a++,i.subscribersCount++,a>50&&h(f(),"Lot of topics registered!",e),{remove:function(){delete n[e][c]}}},l=function(n,e){var t="no-topic-found";n!=t&&d(t,{topic:n,info:e})},d=function(t,a){if(i.messagePassedCount++,i.printMessages&&console.log(f(),"publish",t,a),i.recordMessages&&i.messageLog.push(["publish",t,a]),!i.blockMessages)return o(t)?(n[t].slice().sort(function(n,e){return n.priority-e.priority}).forEach(function(n){n.callback(a!=e?a:{})}),void 0):(l(t,a),void 0)},v=function(n,e){w(function(){d(n,e)})};return{subscribe:c,publish:d,publishAsync:v,debugObj:i}}(),P=function(){return s.counterID},N=function(){var n="siteId";return o[n]=o[n]||0},_=function(){var n="main_div_name";return o[n]||"histats_counter_"+N()+"_"+P()},E=[],F=function(){return d=_(),d},U=function(){return F()+"_canvas"},k=function(){return"http://www.histats.com/viewstats/?sid="+N()+"&ccid="+P()},M=function(){a.location=k()},R=function(){if(1==I.canvasProperties.doMouseOverOut){var n=K().canvasProperties;n.yBase=2,n.xBase=2,n.shadowOffsetX=0,n.shadowOffsetY=0}K().domCanvasObject.style.cursor="pointer"},D=function(){if(1==I.canvasProperties.doMouseOverOut){var n=K().canvasProperties;n.yBase=0,n.xBase=0,n.shadowOffsetX=2,n.shadowOffsetY=2}},V=function(){var n=K(),e=n.canvasProperties,t=n.canvas2dContext;t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,t.shadowColor="rgba(0,0,0,0.2)"},L=function(){return y(F())},j=function(){var n=!!L();return n},Y=function(){try{if(!j())return O.publish("error",{msg:"validateDomcontainer not found"}),void 0;var n=L(),e=K().canvasProperties,t='<canvas id="'+U()+'" width="'+e.w+'" height="'+e.h+'" ></canvas>',r='<a href="'+k()+'" target="_blank">'+t+"</a>";n.innerHTML=r,K().domCanvasObject=y(U());var i=K().domCanvasObject;K().canvas2dContext=i.getContext("2d"),"addEventListener"in a?(i.addEventListener("mouseover",function(){R()}),i.addEventListener("mouseout",function(){D()})):i.onclick=function(){M()}}catch(o){h(f(),"drawCanvas",o)}},G=function(){try{if(l.ANIMATION_STARTED)return;if(l._STOPPED)return;O.publish("draw-callback-requested-reconfiguration",{}),O.publish("starting_pre",{context:o}),l.ANIMATION_STARTED=!0,O.publish("started",{context:o}),O.publish("drawcanvas_pre",{context:o}),Y(),O.publish("drawcanvas_post",{context:o}),H(),O.publish("animationLoop_started",{context:o})}catch(n){h(f(),"startNow",n,n.message)}},z=function(n,e,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent?e.attachEvent("on"+n,t):e[n]=t},W=function(){try{O.publish("appendedStart",{context:o,type:"animFrame"}),w(G)}catch(n){h(f(),"startAsap",n.message,n)}},q=function(n,e){E.push({name:n,callback:e})},Q=function(){},X=function(){E.forEach(function(n){n.callback(o.getCanvas2dContext(),C,K())})},J=function(){u(i)&&a.clearTimeout(i)},H=function(){l._STOPPED||w(function(){en(X),l.ANIMATION_RUNNING_STATUS&&H()})};O.subscribe("setAnimationProperties",function(n){S(n,C)}),O.subscribe("draw-callback-publish-reconfiguration",function(n){try{n.canvasCallbacks.forEach(function(n){E.push({name:n.name,callback:n.cb,priority:n.priority})}),E=E.slice().sort(function(n,e){return n.priority-e.priority})}catch(e){h(f(),"animationLoop",e.message,e)}}),O.subscribe("configuration-changed",function(n){E=[],O.publish("draw-callback-requested-reconfiguration",{})});var Z=function(n){var e=n!=l.ANIMATION_RUNNING_STATUS;return e&&(0==l.ANIMATION_RUNNING_STATUS&&1==n,1==l.ANIMATION_RUNNING_STATUS&&0==n&&J(),l.ANIMATION_RUNNING_STATUS=n),e},K=function(){return I},$=function(){var n=!1;0==C.frameCounter&&O.publish("FIRST-FRAME",{});var e=T.now(),t=e-C.msLastFrameDrawn;if(t>C.msPerFrame){var a=t%C.msPerFrame;C.msLastFrameDrawn=e-a,n=!0}return n},nn=function(){if(!(C.animation_duration_inFrames<1)){var n=C.animation_duration_inFrames+C.waitframesBetweenTwoAnimations;C.currentLoopFrame=C.frameCounter%n;var e=0==C.currentLoopFrame,t=C.currentLoopFrame>=C.animation_duration_inFrames;e&&(C.isInAnimationTransition=!0,O.publish("drawing-triggered-animation-start",C)),t&&C.isInAnimationTransition&&(C.isInAnimationTransition=!1,O.publish("drawing-triggered-animation-end",C))}},en=function(n){var e=$();e&&(C.frameCounter++,nn(),n())},tn=function(n){return n(o.getCanvas2dContext())},an=function(){var n=17,e=2,t=1,a=K().canvasProperties,r=0;a.hasShadow&&(r=r+e+t),a.hasLabel&&(a.h=a.h+n),a.w=a.w+r,a.h=a.h+r},rn=function(n){S(n,K().canvasProperties),an()};O.subscribe("setCanvasProperties",rn,10);var on=function(){o.onCanvas2dContext(function(n){var e=K().canvasProperties;n.clearRect(0,0,e.w,e.h),e.hasShadow&&V()})};O.subscribe("clear-canvas-rectangle",on,10);var sn=function(n,e){K().hasShadow&&(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowColor="transparent")},un=function(n,t){t.autoTriggerTextChange_onFrame!==e&&t.currentLoopFrame==t.autoTriggerTextChange_onFrame&&O.publish("drawing-change-text",{})},cn=function(n){O.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:sn,priority:14,name:"stopApplyingShadowOnCanvas"},{cb:un,priority:5,name:"autoUpdateText"}]})};O.subscribe("draw-callback-requested-reconfiguration",cn,15),o.__CODE_VERSION=n,o.getCanvasObject=K,o.getCanvas2dContext=function(){return K().canvas2dContext},o.onCanvas2dContext=tn,o.getXYCanvas=function(){return{x:K().canvasProperties.xBase,y:K().canvasProperties.yBase}},o.addDrawCallback=q,o.getCanvasProperties=function(){return K().canvasProperties},o.setCanvasProperties=function(n){for(var e in n)n.hasOwnProperty(e)&&(I.canvasProperties[e]=n[e])},o.updateCanvasProperties=function(n){o.setCanvasProperties(n(K().canvasProperties))},o.getAnimationFrames=function(){return C.frameCounter},o.getAnimationControl=function(){return C},o.setAnimationControl=function(n){for(var e in n)n.hasOwnProperty(e)&&(C[e]=n[e])},o.start=W,o.changeRunningStatus=Z,o.getRunningStatus=function(){return l.ANIMATION_RUNNING_STATUS},o.eventBus=O,o.getDebugMode=function(){return s.DEBUG_MODE},function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var t=n.statsText={},a={xBase:0,yBase:0},r=function(){return a},i=function(){var e=n.getXYCanvas();return a.xBase=e.x,a.yBase=e.y,a},o=[],s={stats_values:[],indexStatToShow:0,drawValueCallback:e,drawValueCallbackWithValue:e,drawMetricCallback:e},u=25,c=0,l=function(){return c%u==1},f=function(n){o=n};n.eventBus.subscribe("set-textbox-style",function(e){o=e,n.eventBus.publish("configuration-changed",{})}),n.eventBus.subscribe("canvas-drawValueFunction",function(n){"undefined"!=typeof n["transformationFunction"]&&(s.drawValueCallback=n["transformationFunction"])});function d(n,e,t,a){n=(n+"").replace(/[^0-9+\-Ee.]/g,"");var r=isFinite(+n)?+n:0,i=isFinite(+e)?Math.abs(e):0,o="undefined"==typeof a?",":a,s="undefined"==typeof t?".":t,u="",c=function(n,e){var t=Math.pow(10,e);return""+(Math.round(n*t)/t).toFixed(e)};return u=(i?c(r,i):""+Math.round(r)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(u[1]||"").length<i&&(u[1]=u[1]||"",u[1]+=new Array(i-u[1].length+1).join("0")),u.join(s)}var v=function(t){if(s.stats_values=t,s.drawValueCallback!=e){var a=t[0].value;s.drawValueCallbackWithValue=s.drawValueCallback(a)}n.eventBus.publish("configuration-changed",{})},g=function(){return s.stats_values},h=function(n){if(n===s.stats_values)return!1;if(typeof n==typeof[])for(var e in n)if(n.hasOwnProperty(e)&&typeof n[e]!=typeof{})return!1;return!0},p=function(){return n.globalObjectName+"_setValues"},b=function(){if(l()){var e=p();if("undefined"!=typeof n.$window&&"undefined"!=typeof n.$window[e]){var t=n.$window[e];h(t)&&v(t)}}},m=function(n){return(""+n).match(/^\s*[0-9]+\s*$/)?d(n,0,""," "):n},A=function(e,t){return function(a){a.shadowColor="transparent",a.font=e.name.font,a.textAlign=e.name.align,a.fillStyle=e.name.color,a.fillText(t.name,e.name.x+r().xBase,e.name.y+r().yBase),a.font=e.value.font,a.textAlign=e.value.align,a.fillStyle=e.value.color;var i=t.value;try{i=m(t.value)}catch(o){n.debug(o)}a.fillText(i,e.value.x+r().xBase,e.value.y+r().yBase)}},w=function(){s.indexStatToShow+=o.length,s.indexStatToShow>=s.stats_values.length&&(s.indexStatToShow=0)},T=!1;n.eventBus.subscribe("draw-hideText",function(n){T=!0},11),n.eventBus.subscribe("draw-unHideText",function(n){T=!1},11);var S=function(n){if(!T){var e,t,a=s.indexStatToShow,r=g(),i=r.length;r.length>o.length&&(i=o.length);for(var u=0;u<i&&(a>=r.length&&(a=0),r[a]);u++)e=o[u],t=r[a],A(e,t)(n),a++}},x=function(n,t){return c++,b(),i(),s.drawValueCallbackWithValue!=e?(s.drawValueCallbackWithValue(n),void 0):(S(n),void 0)},y=function(e){n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:x,priority:15,name:"show_stats_draw"}]})};n.eventBus.subscribe("draw-callback-requested-reconfiguration",y,11);var B=n.eventBus.subscribe("drawing-change-text",w,10);t.draw=x,t.setBoxes=f,t.setValues=v}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var t={main:"",source:e,loaded:!1};t.main="data:image/png;base64,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";var a=function(e){var a=t.source=new Image;a.onload=function(){t.loaded=!0,n.eventBus.publish("background-image-loaded",t),n.eventBus.publish("configuration-changed",{})},a.src=t.main};n.eventBus.subscribe("FIRST-FRAME",a,5),n.image_base64_src=t}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var t=n.counter={};t.ID="6",t.properties={w:200,h:40,hasShadow:!0};var a={backgroundImageObject:e},r=!1,i={animation_duration_inFrames:20,autoTriggerTextChange_onFrame:10,waitframesBetweenTwoAnimations:110},o=[{name:{x:32,y:23,align:"left",color:"#ffffff",font:"11px Arial"},value:{x:168,y:23,align:"right",color:"#ffffff",font:"11px Arial"}}];n.eventBus.publish("set-textbox-style",o),n.eventBus.publish("setCanvasProperties",t.properties),n.eventBus.publish("setAnimationProperties",i);var s=function(e,t){var a=n.getXYCanvas(),r={light:{x:27,y:11,w:147,h:17},positivePole:{x:17,y:19,radious:15},negativePole:{x:182,y:19,radious:15}},i=e.createLinearGradient(a.x+10,a.y+11,a.x+10,a.y+11+17);i.addColorStop(0,"rgba(255,255,255,0.1)"),i.addColorStop(.5,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0.1)"),e.fillStyle=i,e.fillRect(a.x+r.light.x,a.y+r.light.y,r.light.w,r.light.h);var o=e.createRadialGradient(a.x+r.positivePole.x,a.y+r.positivePole.y,1,a.x+r.positivePole.x,a.y+r.positivePole.y,r.positivePole.radious);o.addColorStop(0,"rgba(255,58,58,1)"),o.addColorStop(1,"rgba(255,58,58,0.1)"),e.beginPath(),e.arc(a.x+17,a.y+19,r.negativePole.radious,0,2*Math.PI,!1),e.fillStyle=o,e.fill();var s=e.createRadialGradient(a.x+r.negativePole.x,a.y+r.negativePole.y,1,a.x+r.negativePole.x,a.y+r.negativePole.y,15);s.addColorStop(0,"rgba(58,139,255,1)"),s.addColorStop(1,"rgba(58,139,255,0.1)"),e.beginPath(),e.arc(a.x+r.negativePole.x,a.y+r.negativePole.y,15,0,2*Math.PI,!1),e.fillStyle=s,e.fill()},u=function(e,t){n.eventBus.publish("clear-canvas-rectangle",{});var r=n.getXYCanvas();e.drawImage(a.backgroundImageObject.source,r.x,r.y)},c=function(n,e){e.isInAnimationTransition&&e.frameCounter%2==0&&s(n,e)},l=function(t){a.backgroundImageObject!=e&&n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:u,priority:10,name:"drawBackground"},{cb:c,priority:50,name:"executeAnimationTransition"}]})};return n.eventBus.subscribe("draw-callback-requested-reconfiguration",l,13),n.eventBus.subscribe("background-image-loaded",function(n){a.backgroundImageObject=n},13),n.eventBus.subscribe("drawing-triggered-animation-start",function(){n.eventBus.publish("draw-hideText",{})},13),n.eventBus.subscribe("drawing-triggered-animation-end",function(){n.eventBus.publish("draw-unHideText",{})},13),n}.call(o),l.AUTOSTART&&o.start()}catch(ln){}return o},b="base.js",m=window,A="_DEBUG_HISTATSCANVAS_RETURN_BUILDER";_value_RETURN_BUILDER=u(window[A])&&window[A]===!0,window[v()]=p,window["histats_canvascounters_"+b]=p}).call(this);